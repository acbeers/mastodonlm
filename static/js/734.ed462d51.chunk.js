!function(){var t={7775:function(t,n,e){"use strict";var r=e(4165),a=e(5671),u=e(3144),c=e(136),i=e(9388),o=e(5861),s=e(6296),f=e(7112),l=function(t){(0,c.Z)(e,t);var n=(0,i.Z)(e);function e(t){var r;return(0,a.Z)(this,e),(r=n.call(this)).name="TimeoutError",r.message=t,r}return(0,u.Z)(e)}((0,f.Z)(Error)),h=function(t){(0,c.Z)(e,t);var n=(0,i.Z)(e);function e(){var t;return(0,a.Z)(this,e),(t=n.call(this)).name="AuthError",t.message="Not authenticated",t}return(0,u.Z)(e)}((0,f.Z)(Error)),p=e(8887),v=e(4229),d=e(1413),m=function(){function t(){(0,a.Z)(this,t),this.me=null}return(0,u.Z)(t,[{key:"telemetry",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,d.Z)({},n),this.me&&(e.acct=this.me.acct),t.abrupt("return",fetch("https://backend.mastodonlistmanager.org/telemetry",{credentials:"include",method:"POST",body:JSON.stringify(e)}).then((function(){})));case 3:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"error",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,d.Z)({},n),this.me&&(e.acct=this.me.acct),t.abrupt("return",fetch("https://backend.mastodonlistmanager.org/error",{credentials:"include",method:"POST",body:JSON.stringify(e)}).then((function(){})));case 3:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()}]),t}();function k(t,n){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)((0,r.Z)().mark((function t(n,e){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<n.length)){t.next=7;break}return t.next=4,e(n[a],a,n);case 4:a++,t.next=1;break;case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=function(t){if(401===t.status||403===t.status)throw new h;if(!t.ok)throw Error("An error occurred");return t.json().then((function(t){if("LambdaTimeoutError"===t.errorType)throw new l("Backend timeout");if("Service Unavailable"===t.message)throw new l("Backend timeout (likely)");return t})).catch((function(t){throw new Error("An error occurred: ".concat(t))}))},b=function(t){(0,c.Z)(e,t);var n=(0,i.Z)(e);function e(){var t;return(0,a.Z)(this,e),(t=n.call(this)).token=null,t.domain=null,t.debug=0,t.debug=Date.now(),t}return(0,u.Z)(e,[{key:"instance",value:function(){if(!this.token)throw Error("API not ready");return(0,v.x4)({url:"https://".concat(this.domain),accessToken:this.token})}},{key:"ready",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null!==this.token);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"logout",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={token:this.token,domain:this.domain},t.abrupt("return",fetch("https://backend.mastodonlistmanager.org/clientlogout",{credentials:"include",method:"POST",body:JSON.stringify(n)}).then((function(){})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"auth",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://backend.mastodonlistmanager.org/auth","?domain=").concat(n)).then((function(t){return Z(t)})).then((function(t){return t.url}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},{key:"callback",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,e){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.token){t.next=2;break}return t.abrupt("return");case 2:return a=this,t.next=5,fetch("".concat("https://backend.mastodonlistmanager.org/clientcallback","?code=").concat(n,"&domain=").concat(e),{credentials:"include",method:"POST"}).then((function(t){return Z(t)})).then((function(t){a.token=t.token,a.domain=e}));case 5:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}()},{key:"info",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ready()){t.next=2;break}throw Error("API not ready");case 2:if(this.token){t.next=4;break}throw Error("API not ready");case 4:return e=this,t.abrupt("return",(0,v.x4)({url:"https://".concat(this.domain),accessToken:this.token}).then((function(t){return t.v1.accounts.verifyCredentials().then((function(t){var n={id:t.id,display_name:t.displayName,username:t.username,avatar:t.avatar,acct:t.acct+"@"+e.domain,note:t.note,lists:[],following_count:t.followingCount};return e.me=n,{followers:[],lists:[],me:n}})).then(function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var a,u,c,i,o,f,l,h;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=[],u=!1,c=!1,n.prev=3,o=(0,s.Z)(t.v1.lists.list());case 5:return n.next=7,o.next();case 7:if(!(u=!(f=n.sent).done)){n.next=14;break}l=f.value,h=l.map((function(t){return{id:t.id,title:t.title}})),a=a.concat(h);case 11:u=!1,n.next=5;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(3),c=!0,i=n.t0;case 20:if(n.prev=20,n.prev=21,!u||null==o.return){n.next=25;break}return n.next=25,o.return();case 25:if(n.prev=25,!c){n.next=28;break}throw i;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.abrupt("return",{followers:e.followers,lists:a,me:e.me});case 31:case"end":return n.stop()}}),n,null,[[3,16,20,30],[21,,25,29]])})));return function(t){return n.apply(this,arguments)}}()).then(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a){var u,c,i,f,l,h,p,v,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=[],c=!1,i=!1,e.prev=3,l=(0,s.Z)(t.v1.accounts.listFollowing(a.me.id));case 5:return e.next=7,l.next();case 7:if(!(c=!(h=e.sent).done)){e.next=15;break}p=h.value,v=p.map((function(t){return{id:t.id,display_name:t.displayName,username:t.username,avatar:t.avatar,acct:t.acct,note:t.note,following_count:0,lists:[]}})),u=u.concat(v),n(100*u.length/(a.me.following_count+a.lists.length));case 12:c=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),i=!0,f=e.t0;case 21:if(e.prev=21,e.prev=22,!c||null==l.return){e.next=26;break}return e.next=26,l.return();case 26:if(e.prev=26,!i){e.next=29;break}throw f;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return d={},u.forEach((function(t){d[t.id]=t})),e.next=35,k(a.lists,function(){var e=(0,o.Z)((0,r.Z)().mark((function e(u,c){var i,o,f,l,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,l=(0,s.Z)(t.v1.lists.listAccounts(u.id));case 4:return e.next=6,l.next();case 6:if(!(i=!(h=e.sent).done)){e.next=13;break}h.value.forEach((function(t){var n=d[t.id];n&&n.lists.push(u.id)})),n(100*(a.me.following_count+c)/(a.me.following_count+a.lists.length));case 10:i=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),o=!0,f=e.t0;case 19:if(e.prev=19,e.prev=20,!i||null==l.return){e.next=24;break}return e.next=24,l.return();case 24:if(e.prev=24,!o){e.next=27;break}throw f;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])})));return function(t,n){return e.apply(this,arguments)}}());case 35:return e.abrupt("return",{followers:u,lists:a.lists,me:a.me});case 36:case"end":return e.stop()}}),e,null,[[3,17,21,31],[22,,26,30]])})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return t}))})));case 6:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"createList",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.instance().then((function(t){return t.v1.lists.create({title:n})})));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"deleteList",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.instance().then((function(t){t.v1.lists.remove(n)})));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"addToList",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ready()){t.next=2;break}throw Error("API not ready");case 2:if(this.token){t.next=4;break}throw Error("API not ready");case 4:return t.abrupt("return",(0,v.x4)({url:"https://".concat(this.domain),accessToken:this.token}).then((function(t){return t.v1.lists.addAccount(n,{accountIds:[e]})})));case 5:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}()},{key:"removeFromList",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ready()){t.next=2;break}throw Error("API not ready");case 2:if(this.token){t.next=4;break}throw Error("API not ready");case 4:return t.abrupt("return",(0,v.x4)({url:"https://".concat(this.domain),accessToken:this.token}).then((function(t){return t.v1.lists.removeAccount(n,{accountIds:[e]})})));case 5:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}()},{key:"importList",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.instance().then((function(t){return t.v1.lists.create({title:n}).then((function(n){var r=n.id,a=e.map((function(n){return t.v1.accounts.lookup({acct:n})}));return Promise.all(a).then((function(n){var e=n.map((function(t){return t.id}));return t.v1.lists.addAccount(r,{accountIds:e})}))}))})));case 1:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}()}]),e}(m);p.Jj(b)},4654:function(){}},n={};function e(r){var a=n[r];if(void 0!==a)return a.exports;var u=n[r]={exports:{}};return t[r](u,u.exports,e),u.exports}e.m=t,e.x=function(){var t=e.O(void 0,[144,916],(function(){return e(7775)}));return t=e.O(t)},function(){var t=[];e.O=function(n,r,a,u){if(!r){var c=1/0;for(f=0;f<t.length;f++){r=t[f][0],a=t[f][1],u=t[f][2];for(var i=!0,o=0;o<r.length;o++)(!1&u||c>=u)&&Object.keys(e.O).every((function(t){return e.O[t](r[o])}))?r.splice(o--,1):(i=!1,u<c&&(c=u));if(i){t.splice(f--,1);var s=a();void 0!==s&&(n=s)}}return n}u=u||0;for(var f=t.length;f>0&&t[f-1][2]>u;f--)t[f]=t[f-1];t[f]=[r,a,u]}}(),e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,r){return e.f[r](t,n),n}),[]))},e.u=function(t){return"static/js/"+t+"."+{144:"d2d8652c",916:"8e9dbd35"}[t]+".chunk.js"},e.miniCssF=function(t){},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/mastodonlm/",function(){var t={734:1};e.f.i=function(n,r){t[n]||importScripts(e.p+e.u(n))};var n=self.webpackChunklist_manager=self.webpackChunklist_manager||[],r=n.push.bind(n);n.push=function(n){var a=n[0],u=n[1],c=n[2];for(var i in u)e.o(u,i)&&(e.m[i]=u[i]);for(c&&c(e);a.length;)t[a.pop()]=1;r(n)}}(),function(){var t=e.x;e.x=function(){return Promise.all([e.e(144),e.e(916)]).then(t)}}();e.x()}();
//# sourceMappingURL=734.ed462d51.chunk.js.map