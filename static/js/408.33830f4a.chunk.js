!function(){"use strict";var t={9408:function(t,n,r){var e=r(4165),a=r(5861),u=r(5671),o=r(3144),c=r(136),i=r(9388),s=r(7112),h=function(t){(0,c.Z)(r,t);var n=(0,i.Z)(r);function r(t){var e;return(0,u.Z)(this,r),(e=n.call(this)).name="TimeoutError",e.message=t,e}return(0,o.Z)(r)}((0,s.Z)(Error)),f=function(t){(0,c.Z)(r,t);var n=(0,i.Z)(r);function r(){var t;return(0,u.Z)(this,r),(t=n.call(this)).name="AuthError",t.message="Not authenticated",t}return(0,o.Z)(r)}((0,s.Z)(Error)),p=r(8887),l=r(1413),d=function(){function t(){(0,u.Z)(this,t),this.me=null}return(0,o.Z)(t,[{key:"telemetry",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n){var r;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,l.Z)({},n),this.me&&(r.acct=this.me.acct),t.abrupt("return",fetch("https://backend.mastodonlistmanager.org/telemetry",{credentials:"include",method:"POST",body:JSON.stringify(r)}).then((function(){})));case 3:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"error",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n){var r;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,l.Z)({},n),this.me&&(r.acct=this.me.acct),t.abrupt("return",fetch("https://backend.mastodonlistmanager.org/error",{credentials:"include",method:"POST",body:JSON.stringify(r)}).then((function(){})));case 3:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()}]),t}(),m="https://backend.mastodonlistmanager.org/create",v=function(t){if(401===t.status||403===t.status)throw new f;if(!t.ok)throw Error("An error occurred");return t.json().then((function(t){if("LambdaTimeoutError"===t.errorType)throw new h("Backend timeout");if("Service Unavailable"===t.message)throw new h("Backend timeout (likely)");return t})).catch((function(t){throw new Error("An error occurred: ".concat(t))}))},k=function(t){(0,c.Z)(r,t);var n=(0,i.Z)(r);function r(){var t;(0,u.Z)(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))).cookie="",t}return(0,o.Z)(r,[{key:"authenticatedFetch",value:function(t,n){var r=new Headers,e=this.cookie;return e&&r.set("authorization",e),fetch(t,{credentials:"include",method:n.method||"GET",headers:r})}},{key:"authGET",value:function(t){return this.authenticatedFetch(t,{method:"GET"})}},{key:"authPOST",value:function(t){return this.authenticatedFetch(t,{method:"POST"})}},{key:"ready",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null!==this.cookie);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"auth",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.authGET("https://backend.mastodonlistmanager.org/auth").then((function(t){return v(t)})).then((function(t){return t.url})));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"callback",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n,r){var a;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this,t.next=3,fetch("".concat("https://backend.mastodonlistmanager.org/callback","?code=").concat(n,"&domain=").concat(r),{credentials:"include",method:"POST",body:JSON.stringify({code:n,domain:r})}).then((function(t){return v(t)})).then((function(t){a.cookie=t.auth}));case 3:case"end":return t.stop()}}),t,this)})));return function(n,r){return t.apply(this,arguments)}}()},{key:"logout",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.authPOST("https://backend.mastodonlistmanager.org/logout").then((function(t){return v(t)}));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"info",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n){var r,a=this;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,t.abrupt("return",this.authGET("https://backend.mastodonlistmanager.org/meta").then((function(t){return v(t)})).then((function(t){if(!t.me)return t;var e=[],u=t.lists;return r.me=t.me,a.authGET("https://backend.mastodonlistmanager.org/following").then((function(t){return v(t)})).then((function(t){e=t,n(100/3)})).then((function(){return a.authGET("https://backend.mastodonlistmanager.org/lists")})).then((function(t){return v(t)})).then((function(r){n(200/3),e.forEach((function(t){return t.lists=[]}));var a={};return e.forEach((function(t){return a[t.id]=t})),u.forEach((function(t,n){r[t.id].forEach((function(n){var r=a[n];r&&r.lists.push(t.id)}))})),{followers:e,lists:u,me:t.me}}))})));case 2:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"createList",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.authPOST("".concat(m,"?list_name=").concat(n)).then((function(t){return v(t)})).then((function(t){return t.list})));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"deleteList",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.authPOST("".concat("https://backend.mastodonlistmanager.org/delete","?list_id=").concat(n)).then((function(t){return v(t)})));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"addToList",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n,r){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.authPOST("".concat("https://backend.mastodonlistmanager.org/add","?list_id=").concat(n,"&account_id=").concat(r)).then((function(t){return v(t)})));case 1:case"end":return t.stop()}}),t,this)})));return function(n,r){return t.apply(this,arguments)}}()},{key:"removeFromList",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n,r){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.authPOST("".concat("https://backend.mastodonlistmanager.org/remove","?list_id=").concat(n,"&account_id=").concat(r)).then((function(t){return v(t)})));case 1:case"end":return t.stop()}}),t,this)})));return function(n,r){return t.apply(this,arguments)}}()},{key:"importList",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n,r){var a=this;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.authPOST("".concat(m,"?list_name=").concat(n)).then((function(t){return v(t)})).then((function(t){var n=t.list.id;return a.authPOST("".concat("https://backend.mastodonlistmanager.org/import","?list_id=").concat(n,"&accts=").concat(r.join(","))).then((function(t){return v(t)}))})));case 1:case"end":return t.stop()}}),t,this)})));return function(n,r){return t.apply(this,arguments)}}()}]),r}(d);p.Jj(k)}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var u=n[e]={exports:{}};return t[e](u,u.exports,r),u.exports}r.m=t,r.x=function(){var t=r.O(void 0,[144],(function(){return r(9408)}));return t=r.O(t)},function(){var t=[];r.O=function(n,e,a,u){if(!e){var o=1/0;for(h=0;h<t.length;h++){e=t[h][0],a=t[h][1],u=t[h][2];for(var c=!0,i=0;i<e.length;i++)(!1&u||o>=u)&&Object.keys(r.O).every((function(t){return r.O[t](e[i])}))?e.splice(i--,1):(c=!1,u<o&&(o=u));if(c){t.splice(h--,1);var s=a();void 0!==s&&(n=s)}}return n}u=u||0;for(var h=t.length;h>0&&t[h-1][2]>u;h--)t[h]=t[h-1];t[h]=[e,a,u]}}(),r.d=function(t,n){for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(n,e){return r.f[e](t,n),n}),[]))},r.u=function(t){return"static/js/"+t+".d2d8652c.chunk.js"},r.miniCssF=function(t){},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/mastodonlm/",function(){var t={408:1};r.f.i=function(n,e){t[n]||importScripts(r.p+r.u(n))};var n=self.webpackChunklist_manager=self.webpackChunklist_manager||[],e=n.push.bind(n);n.push=function(n){var a=n[0],u=n[1],o=n[2];for(var c in u)r.o(u,c)&&(r.m[c]=u[c]);for(o&&o(r);a.length;)t[a.pop()]=1;e(n)}}(),function(){var t=r.x;r.x=function(){return r.e(144).then(t)}}();r.x()}();
//# sourceMappingURL=408.33830f4a.chunk.js.map